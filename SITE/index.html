<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Piece</title>
</head>

<body>
    Episódio que deseja começar assistindo:
    <input type="number" id="input_comecarassistir">
    <br><br>
    Quantidade de tempo disponível:
    <input type="number" id="input_tempodisponivel">
    <br><br>
    Unidade de tempo em:
    <select name="unidade" id="select_unidadedemedida">
        <option value="selecione">Selecione uma opção</option>
        <option value="horas">Horas</option>
        <option value="minutos">Minutos</option>
    </select>
    <br><br>
    Pular abertura?
    <select name="unidade" id="select_pularabertura">
        <option value="selecione2">Selecione uma opção</option>
        <option value="sim">Sim</option>
        <option value="nao">Não</option>
    </select>
    <br><br>
    Pular encerramento?
    <select name="pularencerramento" id="select_pularencerramento">
        <option value="selecione3">Selecione uma opção</option>
        <option value="sim">Sim</option>
        <option value="nao">Não</option>
    </select>
    <button onclick="assistir()">Assitir episódios</button>
    <br><br>
    <div id="resposta"></div>

    <script>
        function assistir() {
            resposta.innerHTML = "";
            const episodioInicial = Number(input_comecarassistir.value);
            let tempoDisponivel = Number(input_tempodisponivel.value);
            const unidade = select_unidadedemedida.value;
            const pularAbertura = select_pularabertura.value;
            const pularEncerramento = select_pularencerramento.value;
            let episodioAtual = episodioInicial;
            let episodiosAssistidos = 0;

            if (episodioInicial < 1 || episodioInicial > 1100 || tempoDisponivel <= 0) {
                alert("Número do episódio ou tempo disponível é inválido");
            } else {
                for (let episodio = episodioInicial; tempoDisponivel > 0;) {
                    let duracaoEpisodio = 24; // duração padrão do episódio (completo)

                    if (pularAbertura === "sim") {
                        duracaoEpisodio -= 2; // subtrai a duração da abertura
                    }

                    if (pularEncerramento === "sim") {
                        duracaoEpisodio -= 2; // subtrai a duração do encerramento
                    }

                    let minutosAssistidos = duracaoEpisodio;
                    if (tempoDisponivel < duracaoEpisodio) {
                        minutosAssistidos = tempoDisponivel;
                    }

                    tempoDisponivel -= minutosAssistidos;

                    resposta.innerHTML += `<p>Episódio ${episodio}</p>`;

                    for (let minuto = 1; minuto <= minutosAssistidos; minuto++) {
                        let status = "";
                        if (minuto <= 2 && pularAbertura === "nao") {
                            status = "Abertura do Episódio";
                        } else if (minuto > 2 && minuto <= 22) {
                            status = "Assistindo o Episódio";
                        } else if (minuto > 22 && minuto <= 24 && pularEncerramento === "nao") {
                            status = "Encerramento do Episódio";
                        }

                        resposta.innerHTML += `<p>Minuto ${minuto} - ${status}</p>`;
                    }

                    episodiosAssistidos++;
                    episodio++;
                }

                resposta.innerHTML += `<p>Você assistiu ${episodiosAssistidos} episódios</p>`;
            }
        }
    </script>
</body>

</html>
